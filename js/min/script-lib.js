var myCurrentReq=document.getElementById("myscriptLib").getAttribute("myCustomAttrib"),map={},context=dm+myCurrentReq+"/",contextCommon=dm+"common/",category=myCurrentReq.charAt(0).toUpperCase(),typeName=category+myCurrentReq.substr(1),fetchMethod="getAll"+typeName+"Products",successUrl=typeName+"index.html",saveMethod="save"+typeName+"Orders",masterMethod="get"+typeName+"MasterData",minOrder,finalCPrice;function checkHttpReq(){"http:"==location.protocol&&(location.href=location.href.replace("http","https"))}function initMap(t){$("#lodaingModal").modal("show"),alertPopUpAdd(),$.ajax({type:"POST",url:context+fetchMethod,success:function(e){$(e[0]).each(function(){map[$(this).attr("productId")]=$(this).attr("productName")+","+$(this).attr("stockStatus")+","+JSON.stringify($(this).attr("productDetailsList"))}),"H"==t&&generateProduct(e[1]),localStorage.setItem(myCurrentReq+"mymap",JSON.stringify(map)),setTimeout(hidePopup,600)},error:function(t){setTimeout(hidePopup,600),alert(t)}})}function hidePopup(){$("#lodaingModal").modal("hide")}function cardCount(){var t=0,e=localStorage.getItem(myCurrentReq+"card");null!=e&&$.each(e.split(","),function(e,a){"null"!=a&&""!=a&&""!=a.split("#")[0]&&t++}),$(".cardCount").html("["+t+"]")}function addtoCard(t,e){var a=$("option:selected",$("#catgID"+t)).attr("data-maxqty");-1==a?cartmsgContent(t):a>=parseInt($("#qtyID"+t).val())+checkAlreadyCartAddedCount(t)?cartmsgContent(t):$("#alertMsg").html("Sorry! Only "+$("option:selected",$("#catgID"+t)).attr("data-maxqty")+" items are available in stock for "+map[t].split(",")[0]);return $("#alertModal").modal("show"),!1}function cartmsgContent(t){var e=t+"#"+$("#qtyID"+t).val()+"#"+$("#catgID"+t).find(":selected").attr("data-id");localStorage.setItem(myCurrentReq+"card",localStorage.getItem(myCurrentReq+"card")+","+e),cardCount(),$("#alertMsg").html(map[t].split(",")[0]+" successfully added to cart, with "+$("#qtyID"+t).val()+" quantity.")}function checkAlreadyCartAddedCount(t){var e=0,a=localStorage.getItem(myCurrentReq+"card");return null!=a&&$.each(a.split(","),function(a,r){if("null"!=r&&""!=r){var o=r.split("#")[1];null==o&&(o=1),r.split("#")[0]==t&&r.split("#")[2]==$("#catgID"+t).find(":selected").attr("data-id")&&(e+=parseInt(o))}}),e}cardCount(),hidePlaySToreIconIfApp(),checkHttpReq();var isCoupancase="N",f="",doc;function mainTotal(t){$.ajax({type:"POST",url:context+"calcRebInt",data:'{"coupan":"'+$("#coupontxt").val()+'","carddetails":"'+localStorage.getItem(myCurrentReq+"card").substr(5)+'"}',success:function(e){$("#MRPfinalTotal").html($(e)[9]+" Rs"),$("#finalTotal").html($(e)[0]+" Rs"),$("#disc").html($(e)[1]+" Rs"),$("#deliveryCharge").html($(e)[2]+" Rs"),$("#mainTotal").html($(e)[3]+" Rs"),$("#deliveryDesc").html($(e)[5]),finalCPrice=$(e)[3],minOrder=$(e)[4],"Y"==t&&($("#alertMsg").html($(e)[8]),$("#alertModal").modal("show"),isCoupancase="Y"==$(e)[6]?"Y":"N")},error:function(t){$("#lodaingModal").modal("hide"),$("#closeButton").show(),alert(t)}}),initLData()}function initLData(){$.getJSON("https://ipapi.co/json/",function(t){f="IP:"+$(t).attr("ip")+", City:"+$(t).attr("city")+", Region:"+$(t).attr("region")+", postal:"+$(t).attr("postal")+", latitude:"+$(t).attr("latitude")+", longitude:"+$(t).attr("longitude")+", org:"+$(t).attr("org"),f=btoa(f)})}function removeProduct(t,e){disc=0;var a=localStorage.getItem(myCurrentReq+"card");return a=a.replace(t,""),localStorage.setItem(myCurrentReq+"card",a),$("#sectiondetails"+e).remove(),mainTotal(),cardCount(),!1}function initCart(){alertPopUpAdd(),map=JSON.parse(localStorage.getItem(myCurrentReq+"mymap")),displayCardDetails(),mainTotal(),checkPreviousCartValue()}function displayCardDetails(){var t="";"A"==category&&(t="display:none");var e=localStorage.getItem(myCurrentReq+"card");null!=e&&$.each(e.split(","),function(e,a){if("null"!=a&&""!=a){var r=a.split("#")[1];null==r&&(r=1);var o=a.split("#")[0];if(""!=o){var i=map[o].substr(map[o].indexOf("{")-1),n=JSON.parse(i);n=$(n).get(a.split("#")[2]);var s=$(n).attr("minPrice")*r,l="return removeProduct('"+a+"',"+e+")",d='<div class="col-md-6 col-lg-3 ftco-animate fadeInUp ftco-animated" id="sectiondetails'+e+'"><div class="product"><a href="javascript:void(0)" style="text-align: center" class="img-prod"><img class="img-fluid" src="images/product-'+o+'.jpg" style="height: 190px;width: 190px;" alt="No Image"><div class="overlay"></div></a><div class="text pb-4 px-3 text-center"><h3><a href="javascript:void(0)">'+map[o].substr(0,map[o].indexOf(","))+"</a></h3><h5>"+$(n).attr("productDesc")+'</h5><div class="pricing123"><p class="price"><span class="price-sale" style="'+t+'" >Price - '+$(n).attr("minPrice")+' Rs</span><br><span style="'+t+'" class="price-sale">&nbsp;&nbsp;Quantity - '+r+'</span><br><span class="price-sale" style="'+t+'">&nbsp;&nbsp;Final Price - '+s+' Rs</span><br><span class="price-sale">&nbsp;&nbsp;<input type="button" value="Remove from cart" onclick="'+l+'" class="btn btn-primary"  ></span><span class="total" style="display:none" data-val="'+o+","+r+'" id="totVal'+e+'">'+s+" Rs</span></p></div></div></div></div>";$("#cardDetailsData").append(d)}}})}function checkQty(t){""!=$(t).val().trim()&&($(t).val()>0&&$(t).val()<100||$(t).val("1"))}function checkQtyStatus(t){""==$(t).val().trim()&&$(t).val("1")}function generateProduct(t){null==t&&(t=4),t=12/t,$.map(map,function(e,a){e.split(",")[0];var r=e.split(",")[1],o=e.substr(e.indexOf(",")+1),i=JSON.parse(o.substr(o.indexOf(",")+1)),n="",s="",l="",d="<br> Category ",c="",u=0,p="";if($(i).each(function(){"D"!=$(this).attr("stockStatus")&&(u++,p=$(this).attr("productDesc"))}),0!=u){1==u&&(c+="style=display:none;",d=d+": <a href='javascript:void(0)' style='color: black;'>"+p+"</a>"),d=d+"<select id='catgID"+a+"' onchange='return calcPrice(this,"+a+")' "+c+">";var m=0;$(i).each(function(){"D"!=$(this).attr("stockStatus")&&(d=d+"<option data-maxQty='"+$(this).attr("stockCount")+"' data-id='"+$(this).attr("id")+"' data-max='"+$(this).attr("maxPrice")+"' data-dis='"+$(this).attr("discount")+"' data-min='"+$(this).attr("minPrice")+"' value='"+$(this).attr("productDesc")+"'>"+$(this).attr("productDesc")+"</option>",0==m&&(n=$(this).attr("minPrice"),s=$(this).attr("maxPrice"),maxQty=$(this).attr("stockCount"),l=$(this).attr("discount")),m++)}),d+="</select>";var v=e.split(",");if("D"!=r){var h,f="",y="";s!=n&&(f=l,y="status"),h="Y"==r?'<br><span> Quantity <input type="number" id="qtyID'+a+'" value="1" min="1" max="99" onblur="return checkQtyStatus(this)" onKeyup="return checkQty(this)" size="4" style="margin-bottom: 6px;text-align: center;"></span><input type="button" onClick="return addtoCard('+a+',this)" class="btn btn-primary" value="Add to Cart">':'<br><span class="btn btn-danger">Out of Stock</span>';var b="";-1!=maxQty&&(b="Hurry! Only "+maxQty+" quanitiy Available.");var g='<div class="col-md-6 col-lg-'+t+' ftco-animate fadeInUp ftco-animated productNameClass" data-id="'+v[0]+'" ><div class="product"><a href="javascript:void(0)" class="img-prod" style="text-align: center"><img class="img-fluid" src="images/product-'+a+'.jpg" alt="No Image" style="height: 190px;width: 190px;"><span id="discountSec'+a+'" class="'+y+'">'+f+'</span><div class="overlay"></div></a><div class="text pb-4 px-3 text-center"><h3><a href="javascript:void(0)">'+v[0]+'</a></h3><h6 id="stockQtyId'+a+'" style="color: red;font-size: small;">'+b+'</h6><div class=""><div class="pricing123"><p class="price"  ><span id="priceSection'+a+'">'+getAmountDesc(s,n,l,a,maxQty)+'</span><span class="price-sale" >'+d+"</span>"+h+"</p></div></div></div></div></div>";$("#productDetails").append(g)}}});var e="<div class='row'><div class='col-md-12' align='center'><a href='"+$(".icon-shopping_cart").parent().attr("href")+"' class='nav-link'> <span class='btn btn-primary py-3 px-5' style='font-size: 25px;color:black;'>Proceed For Order &nbsp;&nbsp;<span class='icon-shopping_cart w3-large'></span><span class='cardCount' style='font-size: 25px;black;'></span></span></a></div></div>";$("#productDetails").parent().append(e)}function getAmountDesc(t,e,a,r,o){var i="";return t==e?(i='<span  class="price-sale" id="maxP'+r+'" >Our Price '+e+" Rs</span>",$("#discountSec"+r).removeClass("status").html("")):(i='<span  class="mr-2 price-dc" id="maxP'+r+'" >MRP '+t+' Rs</span><br><span class="price-sale" id="minP'+r+'" >Our Price '+e+" Rs</span>",$("#discountSec"+r).addClass("status").html(a)),$("#stockQtyId"+r).html(""),-1!=o&&$("#stockQtyId"+r).html("Hurry! Only "+o+" quanitiy Available."),i}function calcPrice(t,e){var a=getAmountDesc($(t).find(":selected").attr("data-max"),$(t).find(":selected").attr("data-min"),$(t).find(":selected").attr("data-dis"),e,$(t).find(":selected").attr("data-maxQty"));$("#priceSection"+e).html(a)}function displaySearchResult(t){""!=$(t).val()?$(".productNameClass").each(function(){-1==$(this).attr("data-id").toLowerCase().indexOf($(t).val().toLowerCase())&&$(this).hide()}):$(".productNameClass").show()}function closePopup(){$("#lodaingModal").modal("hide"),localStorage.removeItem(myCurrentReq+"mymap"),localStorage.removeItem(myCurrentReq+"card"),location.href=successUrl}function closeAndFeedback(){closePopup(),location.href=$("#feedbackId").attr("href")}function applyCoupon(){return mainTotal("Y"),!1}function placeOrder(){return null==minOrder||null==finalCPrice?($("#alertMsg").html("Please add some items in cart before placing order."),$("#alertModal").modal("show"),!1):parseInt(minOrder)>parseInt(finalCPrice)?($("#alertMsg").html("Sorry you must have minimum order of "+minOrder+" Rs."),$("#alertModal").modal("show"),!1):""==$("#fname").val()?($("#alertMsg").html("Please enter your Name."),$("#alertModal").modal("show"),$("#fname").focus(),!1):""==$("#streetAddress").val()?($("#alertMsg").html("Please enter Address."),$("#alertModal").modal("show"),$("#streetAddress").focus(),!1):""==$("#mobileNo").val()?($("#alertMsg").html("Please enter Mobile Number."),$("#alertModal").modal("show"),$("#mobileNo").focus(),!1):10!=$("#mobileNo").val().length?($("#alertMsg").html("Please enter 10 digit Mobile Number."),$("#alertModal").modal("show"),$("#mobileNo").focus(),!1):checkValidEmailID($("#emailid").val())?($("#alertMsg").html("Please enter valid Email ID."),$("#alertModal").modal("show"),$("#emailid").focus(),!1):(confirmAddOkCancel(),$("#orderConfirmationContent").html("Are you sure you want to place order?"),$("#lodaingModal").modal("show"),void saveCardDetails())}function checkValidEmailID(t){var e=!0;return-1!=t.indexOf("@")&&-1!=t.indexOf(".")&&(e=!1),e}function confirmPayment(){$("#orderConfirmationContent").html("Order in Process. Please Wait..."),$("#lodaingModal").find(".modal-footer").html("");var t={};t.userName=$("#fname").val()+" "+$("#lname").val(),t.address=$("#sector").val()+", "+$("#apartment").val()+", "+$("#streetAddress").val()+", "+$("#city").val()+", "+$("#pincode").val(),t.emailid=$("#emailid").val(),t.mobileNo=$("#mobileNo").val(),t.additionalNote=$("#additionalNote").val(),t.inputdata=f,t.carddetails=localStorage.getItem(myCurrentReq+"card").substr(5),t.coupan="Y"==isCoupancase?$("#coupontxt").val():"",$.ajax({type:"POST",url:context+saveMethod,data:JSON.stringify(t),success:function(t){$("#closeFeedbackButton").show(),t+="<br><b>Note:</b> Above information is also send to you, on your EmailID.<br><br>",$("#orderConfirmationContent").html(t),confirmAddClose()},error:function(t){$("#lodaingModal").modal("hide"),$("#closeButton").show(),alert(t)}})}function saveCardDetails(){var t={};t.fname=$("#fname").val(),t.lname=$("#lname").val(),t.sector=$("#sector").val(),t.streetAddress=$("#streetAddress").val(),t.apartment=$("#apartment").val(),t.city=$("#city").val(),t.pincode=$("#pincode").val(),t.mobileNo=$("#mobileNo").val(),t.emailid=$("#emailid").val(),localStorage.setItem("mycarddetails",JSON.stringify(t))}function checkPreviousCartValue(){var t=JSON.parse(localStorage.getItem("mycarddetails"));null!=t&&jQuery.each(t,function(t,e){$("#"+t).val(e)})}function initMasterRates(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+masterMethod,data:t,success:function(t){setTimeout(hidePopup,500),generateMaster(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function initOrderDetails(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"getOrderHistory",data:t,success:function(t){setTimeout(hidePopup,500),generateDetails(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function displayProfile(){var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"getVendorInfo",data:t,success:function(t){displayProfilePopUp(t)},error:function(t){alert(t.responseJSON)}})}function closeVendorDetails(){$("#vendorModal").modal("hide")}function displayProfilePopUp(t){$("#coupanRows").html(""),$("#vendorModal").modal("show"),$("#vendorName").val($(t).attr("vendorName")),$("#mobileNo").val($(t).attr("mobileNo")),$("#emailid").val($(t).attr("emailid")),$("#minOrder").val($(t).attr("minOrder")),$("#discFormula").val($(t).attr("discFormula")),$("#discountDesc").val($(t).attr("discountDesc")),$("#orderDeliverTime").val($(t).attr("orderDeliverTime")),$("#vendorpassword").val($(t).attr("vendorPassword")),$("#envMode").val($(t).attr("envMode")),$("#idval").val($(t).attr("id")),$("#category").val($(t).attr("category")),$("#offerNote").val($(t).attr("offerNote")),$("#indexColumns").val($(t).attr("indexColumns")),$("#folderPath").val($(t).attr("folderPath")),$.each($(t).attr("coupansList"),function(t,e){var a=addNewCoupan();$("#coupanRowDetails"+a).find("td").eq(1).find('select[name="type"]').val($(e).attr("type")),$("#coupanRowDetails"+a).find("td").eq(2).find('input[name="id"]').val($(e).attr("id")),$("#coupanRowDetails"+a).find("td").eq(2).find('input[name="code"]').val($(e).attr("code")),$("#coupanRowDetails"+a).find("td").eq(3).find('input[name="discount"]').val($(e).attr("discount")),$("#coupanRowDetails"+a).find("td").eq(4).find('select[name="status"]').val($(e).attr("status")),$("#coupanRowDetails"+a).find("td").eq(5).find('input[name="validFrom"]').val($(e).attr("validFrom")),$("#coupanRowDetails"+a).find("td").eq(6).find('input[name="validTo"]').val($(e).attr("validTo")),$("#coupanRowDetails"+a).find("td").eq(7).find('input[name="amountGreater"]').val($(e).attr("amountGreater")),$("#coupanRowDetails"+a).find("td").eq(8).find('input[name="description"]').val($(e).attr("description")),coupanTypeChange($("#coupanType_"+a),a)})}function updateVendorDetails(){var t=new Array;$("#coupanForm tbody tr").each(function(){rowData=$(this).find("input, select").serializeArray();var e={};$.each(rowData,function(t,a){e[a.name]=a.value}),t.push(e)});var e={};e.vendorName=$("#vendorName").val(),e.mobileNo=$("#mobileNo").val(),e.emailid=$("#emailid").val(),e.minOrder=$("#minOrder").val(),e.discFormula=$("#discFormula").val(),e.discountDesc=$("#discountDesc").val(),e.orderDeliverTime=$("#orderDeliverTime").val(),e.vendorPassword=$("#vendorpassword").val(),e.envMode=$("#envMode").val(),e.coupansList=t,e.id=$("#idval").val(),e.category=$("#category").val(),e.offerNote=$("#offerNote").val(),e.password=$("#password").val(),e.indexColumns=$("#indexColumns").val(),e.folderPath=$("#folderPath").val(),$.ajax({type:"POST",url:context+"saveVendorInfo",data:JSON.stringify(e),success:function(t){alert("Updated sucessfully.")},error:function(t){alert("Error. Please contact support")}})}function generateMaster(t){var e="<style>th{text-align:center;}</style><div class='col-sm-12' style='margin-bottom: 15px;'><input type='button' onclick='return displayProfile();' value='View Update Profile' class='btn btn-primary' />&nbsp;&nbsp;<input type='button' onclick='return sendImagesToFTP(this);' value='Transfer Images to FTP Server' class='btn btn-primary' /></div>";e+="<br><table><tr style='border-top: 1px solid;'><th>ID</th><th>Product Name</th><th>Status</th><th>Product<br>Description</th><th>Min<br>Price</th><th>Max<br>Price</th><th>Status</th><th>Stock<br>Count</th><th>Image</th><th>Update</th></tr>";var a=1;$(t).each(function(t,r){e=e+'<tr data-id="'+t+'" style="border-top: 1px solid;"><td><input type="number" style="width:50px" data-prodid="'+$(r).attr("id")+'" id="productId'+t+'" readonly value="'+$(r).attr("productId")+'"></td><td><input id="productName'+t+'" type="text" maxlength="20" value="'+$(r).attr("productName")+'"></td><td><input type="text" style="width:30px" id="stockStatusM'+t+'" value="'+$(r).attr("stockStatus")+'"></td><td></td><td></td><td></td><td></td><td></td><td><input type="file" data-fileid="'+$(r).attr("id")+'" class="productimage" style="width: 104px;"><img id="'+$(r).attr("id")+'custPic-orignal" width="500px" style="display:none"><div class="'+$(r).attr("id")+'image-sec-cust"><img id="'+$(r).attr("id")+'custPic-image" ></div></td><td><input type="button" class="btn btn-primary btn-sm" onClick="return updateRow('+t+')" value="Update" />&nbsp;&nbsp;<input type="button" class="btn btn-primary btn-sm" onClick="return addNewChild('+t+')" value="Add Child Record" /></tr>',$($(r).attr("productDetailsList")).each(function(a,r){e=e+'<tr><td></td><td></td><td></td><td><input class="productdesc'+t+'" maxlength="20" type="text" value="'+$(this).attr("productDesc")+'"></td><td><input type="number" class="minVal'+t+'"  style="width: 60px;" value="'+$(this).attr("minPrice")+'"></td><td><input class="maxVal'+t+'" type="number" style="width: 60px;" value="'+$(this).attr("maxPrice")+'"></td><td><input type="text" style="width:30px" class="stockStatus'+t+'" value="'+$(this).attr("stockStatus")+'"></td><td><input type="number" style="width:50px" class="stockCount'+t+'" value="'+$(this).attr("stockCount")+'"></td></tr>'}),a=$(r).attr("productId")}),$("#orderDetails").html(addNewRow(e,++a)),$(".productimage").change(function(t){resizeCustPic($(this),t)})}function addNewRow(t,e){return t=(t=t+'<tr style="border-top: 1px solid;"><td><input type="number" readonly style="width:50px" data-prodid="" id="productId'+e+'" value="'+e+'"></td><td><input maxlength="20" id="productName'+e+'" type="text"></td><td><input type="text" size="2" id="stockStatusM'+e+'"  style="width:30px" ></td><td></td><td></td><td></td><td></td><td></td><td><input type="file" data-fileid="'+e+'" class="productimage" style="width: 104px;"><img id="'+e+'custPic-orignal" width="500px" style="display:none"><div class="'+e+'image-sec-cust"><img id="'+e+'custPic-image" ></div></td><td><input type="button" class="btn btn-primary btn-sm" onClick="return updateRow('+e+')" value="Add New Record" />&nbsp;&nbsp;<input type="button" class="btn btn-primary btn-sm" onClick="return addNewChild('+e+')" value="Add Child Record" /></td></tr>')+'<tr data-id="'+e+'" ><td></td><td></td><td></td><td><input class="productdesc'+e+'" type="text" ></td><td><input type="number" class="minVal'+e+'"  style="width: 60px;" ></td><td><input class="maxVal'+e+'" type="number"  style="width: 60px;" ></td><td><input type="text" style="width:30px" class="stockStatus'+e+'" ></td><td><input type="number" style="width:50px" class="stockCount'+e+'" ></td></tr></table>'}function addNewChild(t){var e='<tr><td></td><td></td><td></td><td><input class="productdesc'+t+'" type="text" maxlength="20" ></td><td><input type="number" class="minVal'+t+'"  style="width: 60px;" ></td><td><input class="maxVal'+t+'" type="number"  style="width: 60px;" ></td><td><input type="text" style="width:30px" class="stockStatus'+t+'" ></td><td><input type="text" style="width:50px" class="stockCount'+t+'" ></td></tr></table>';$("table > tbody ").find("[data-id='"+t+"']").after(e)}function sendImagesToFTP(t){confirm("Are you sure you want to send Images data to FTP server? Before send Please add images to product")&&($(t).attr("disabled",!0),$(t).attr("value","Please wait sending images data to FTP ..."),$.ajax({type:"POST",url:contextCommon+"transferToFTP",success:function(e){alert("Images successfully transfered to FTP server. Images will reflect in 30 secounds"),$(t).attr("disabled",!1),$(t).attr("value","Transfer Images to FTP Server")},error:function(t){alert(t)}}))}function updateRow(t){if(""==$("#productName"+t).val())return alert("Please enter Product Name"),!1;if("Y"!=$("#stockStatusM"+t).val()&&"N"!=$("#stockStatusM"+t).val()&&"D"!=$("#stockStatusM"+t).val())return alert("Please enter valid Status.\n Status can be of Below combination \n Y - Available \n N - Out Of Stock \n D - Hide Product"),!1;var e={};e.password=$("#password").val();var a=0,r="",o=!0;if($(".productdesc"+t).each(function(){if(""==$(".productdesc"+t).eq(a).val()&&(alert("Please enter valid Product Description"),o=!1),(""==$(".maxVal"+t).eq(a).val()||$(".maxVal"+t).eq(a).val()<0)&&(alert("Please enter valid Max Price"),o=!1),(""==$(".minVal"+t).eq(a).val()||$(".minVal"+t).eq(a).val()<0)&&(alert("Please enter valid Mix Price"),o=!1),parseInt($(".minVal"+t).eq(a).val())>parseInt($(".maxVal"+t).eq(a).val())&&(alert("Max Price must be greater or equal to Min Price"),o=!1),"Y"!=$(".stockStatus"+t).eq(a).val()&&"D"!=$(".stockStatus"+t).eq(a).val()&&(alert("Please enter valid Product Description record Status.\n Status can be of Below combination \n Y - Available \n D - Hide Product"),o=!1),(""==$(".stockCount"+t).eq(a).val()||$(".stockCount"+t).eq(a).val()<-1||0==$(".stockCount"+t).eq(a).val()&&"D"!=$(".stockStatus"+t).eq(a).val())&&(alert("Please enter valid Stock Count \n Stock Count has below combination \n -1 : Items has infinity count \n 0 : Item only has 0 count, If Status id D \n Any Other Positive have can be accepted."),o=!1)," "!=$(".maxVal"+t).eq(a).val()){var e=parseInt($(".maxVal"+t).eq(a).val())-parseInt($(".minVal"+t).eq(a).val());e=0==(e=e/parseInt($(".maxVal"+t).eq(a).val())*100)?" ":Math.trunc(e)+"%"}else e=" ";""!=$(this).val()&&(r=r+$(".minVal"+t).eq(a).val()+"#"+$(".maxVal"+t).eq(a).val()+"#"+$(".stockStatus"+t).eq(a).val()+"#"+$(".stockCount"+t).eq(a).val()+"#"+e+"#"+$(this).val()+","),a++}),!o)return!1;if(e.details=r.substr(0,r.length-1),e.productName=$("#productName"+t).val(),e.stockStatus=$("#stockStatusM"+t).val()," "!=$(".maxVal"+t).val()){var i=parseInt($("#maxVal"+t).val())-parseInt($("#minVal"+t).val());i=0==(i=i/parseInt($("#maxVal"+t).val())*100)?" ":Math.trunc(i)+"%"}else i=" ";e.productId=$("#productId"+t).val();var n=$("#productId"+t).attr("data-prodid");""==$("#productId"+t).attr("data-prodid")&&(n=$("#productId"+t).val()),e.id=$("#productId"+t).attr("data-prodid");var s="",l=document.getElementById(n+"custPic-image").src;return null!=l&&""!=l&&(s=l.split(",")[1]),e.productImg=s,$("#lodaingModal").modal("show"),updateTables(JSON.stringify(e),"updateProductMaster","initMasterRates"),!1}function generateDetails(t){$("#orderDetails").html("");var e="",a="",r=1,o="";$(t).each(function(t,i){var n="";"Delivered"!=$(i).attr("orderStatus")&&"Cancelled"!=$(i).attr("orderStatus")&&(n='<select id="statusddval'+r+'"><option value="In-Progress">In-Progress</option><option value="Delivered">Delivered</option><option value="UnReachable">UnReachable</option><option value="Out of Stock">Out of Stock</option><option value="Cancelled">Cancelled</option></select>&nbsp;&nbsp;<input type="button" data-id="'+$(i).attr("id")+'"  data-emailid="'+$($(i).attr("user")).attr("emailid")+'" data-name="'+$($(i).attr("user")).attr("userName")+'" class="btn btn-primary" onclick="return updatestatus(this,'+r+')" value="update" />');var s="";null!=$(i).attr("additionalNote")&&'""'!=$(i).attr("additionalNote")&&(s=", <b>Additional Info:</b>"+$(i).attr("additionalNote"));var l="<ol>";$($($(i).attr("orderDetailsList"))).each(function(t,e){l=l+"<li>"+$(e).attr("description")+"</li>"}),a!=$(i).attr("datetime").substr(0,10)?(e=e.replace("#runtime#",o),o=(o="")+"<p>"+r+'.<input type="hidden" value="'+l+'" id="datadesc'+r+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+r+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> using Mobile No. <b>"+$($(i).attr("user")).attr("mobileNo")+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,e=e+'<div class="col-sm-12"><div class="cart-wrap ftco-animate fadeInUp ftco-animated"><div class="cart-total mb-3"><h3>'+$(i).attr("datetime").substr(0,10)+'</h3><div id="detailssub">#runtime#</div></div></div></div>',a=$(i).attr("datetime").substr(0,10)):o=o+"<p>"+r+'.<input type="hidden" value="'+l+'" id="datadesc'+r+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+r+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> using Mobile No. <b>"+$($(i).attr("user")).attr("mobileNo")+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,r++}),e=e.replace("#runtime#",o),$("#orderDetails").append(e)}function viewOrderDetails(t,e){$("#exampleModalLabel").html("Below are Order Details"),$(".modal-body").html($("#datadesc"+e).val()+"</ol>"),$("#lodaingModal").modal("show")}function updatestatus(t,e){$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var a={};a.password=$("#password").val(),a.masterid=$(t).attr("data-id"),a.status=$("#statusddval"+e).val(),a.orderStatusComment="",updateTables(JSON.stringify(a),"updateOrderStatus","initOrderDetails")}function showCancelPopup(t){$("#cancelOrderModal").modal("show"),$("#cancelOrderComm").focus(),$("#cancelOrderButton").prop("disabled",!1)}function updateCancelstatus(t){if($("#errorMsgid").hide(),$("#cancelOrderComm").val().length<10)return $("#errorMsgid").show(),!1;$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var e={};e.masterid=$(t).attr("data-id"),e.orderStatusComment=$("#cancelOrderComm").val(),updateTables(JSON.stringify(e),"custUpdateOrderStatus","refreshViewOrderPage")}function refreshViewOrderPage(){""!=window.location.search?location.reload():location.href=location.href+"?"+$("#cancelOrderButton").attr("data-orderid")}function closeCancelOrderPopup(){$("#cancelOrderModal").modal("hide")}function updateTables(data,method,call){$.ajax({type:"POST",url:context+method,data:data,success:function(response){alert(response),eval(call+"()")},error:function(t){alert(t)}})}function submitViewOrder(){$("#ordersection").hide(),$("#viewOrderId").attr("disabled",!0),$("#viewOrderId").attr("value","Please wait ..."),$("#errorId").html(""),$.ajax({type:"POST",url:contextCommon+"findOrder",data:'{"orderid":"'+$("#Orderid").val()+'"}',success:function(t){$("#viewOrderId").attr("disabled",!1),$("#viewOrderId").attr("value","View Orders");var e=$(t).attr("catagory")+"#Order ID: "+$(t).attr("orderid")+" Name: "+$($(t).attr("user")).attr("userName")+" #Mobile No: "+$($(t).attr("user")).attr("mobileNo")+" Email ID: "+$($(t).attr("user")).attr("emailid");$("#feedbackForOrder").attr("href","ContactForm.html?"+btoa(e)),$("#cancelOrderButton").attr("data-id",$(t).attr("id")),$("#cancelOrderButton").attr("data-orderid",$(t).attr("orderid")),"In-Progress"==$(t).attr("orderStatus")&&$("#cancelOrder").show();var a="",r="";null!=$(t).attr("coupanCode")&&(r=", Coupon Used "+$(t).attr("coupanCode"));var o="",i="Delivered";"In-Progress"!=$(t).attr("orderStatus")&&(i=$(t).attr("orderStatus"),o="active"),$("#orderDateId").html($(t).attr("datetime")),$("#orderFinalDateId").html(""),$(".widthIcons").attr("style","width:25%"),$(".shippedOrderClass").attr("style","width:25%");var n="width:25%",s='<li style="'+n+'" class="'+o+' step0"></li>';"In-Progress"!=$(t).attr("orderStatus")&&"Delivered"!=$(t).attr("orderStatus")&&($(".shippedOrderClass").attr("style","display:none !important;width:33%"),s="",n="width:33%",$(".widthIcons").attr("style","width:33%")),"In-Progress"!=$(t).attr("orderStatus")&&$("#orderFinalDateId").html($(t).attr("orderStatusDate"));var l='<ul id="progressbar" class="text-center"><li style="'+n+'" class="active step0"></li><li style="'+n+'" class="active step0"></li>'+s+'<li style="'+n+'" class="'+o+' step0"></li></ul>';$("#orderInfo").html(l),$("#orderStatusName").html(i);var d="";null!=$(t).attr("orderStatusComment")&&""!=$(t).attr("orderStatusComment")&&(d=", With Comment <b>"+$(t).attr("orderStatusComment")+"</b>"),$("#orderHeader").html("Thank you "+$($(t).attr("user")).attr("userName")+" for placing order."),a=(a=(a=(a=a+"<p> Your order was placed on "+$(t).attr("datetime")+". Order status is <b>"+$(t).attr("orderStatus")+"</b> "+d+". </p>")+"<p> Total Amount was  "+$(t).attr("finalPrice")+" Rs, Discount was "+$(t).attr("discount")+" Rs, Delivery charges was "+$(t).attr("deliveryCharge")+" Rs"+r+". </p>")+"<p> Delivery person will contact you on mobile no "+$($(t).attr("user")).attr("mobileNo")+", or email id "+$($(t).attr("user")).attr("emailid")+". </p>")+"<p> Delivery address is "+$($(t).attr("user")).attr("address")+". </p>",a+="<br><p><b>Below are order details</b></p>";var c=$(t).attr("clientIp")+"/images/product-";a+="<table class='table-striped table-bordered table-hover'>",$($($(t).attr("orderDetailsList"))).each(function(t,e){a=a+"<tr><td style='padding:10px'><img style='height:150px;width:150px' src="+c+$(e).attr("productId")+".jpg></td><td style='padding:10px'>"+$(e).attr("description")+"</td></tr>"}),a+="</table></br>",$("#detailssub").html(a),$("#ordersection").show(),category=$($(t).attr("master")).attr("catagory")},error:function(t){$("#viewOrderId").attr("disabled",!1),$("#viewOrderId").attr("value","View Orders"),$("#errorId").html("Please enter valid Order ID. Order ID is send to you via email and SMS.")}})}function refreshMaster(){$.ajax({type:"POST",url:contextCommon+"refreshMaster",data:JSON.stringify(map),success:function(t){alert(t)},error:function(t){alert("Error. Please contact support")}})}function getOfferAll(){$.ajax({type:"POST",url:contextCommon+"mainOfferSection",data:JSON.stringify(map),success:function(t){$(".offerMarqueNote").html("<p>"+t+"</p>")},error:function(t){}})}function getOfferProduct(){$.ajax({type:"POST",url:context+"productOfferSection",data:JSON.stringify(map),success:function(t){$(".offerMarqueNoteDetails").html("<p>"+t+"</p>")},error:function(t){}})}function submitFeedBack(t){if(""==$("#Name").val())return alert("Please enter your Name."),$("#Name").focus(),!1;if(""==$("#phoneNO").val())return alert("Please enter Mobile Number."),$("#phoneNO").focus(),!1;if(""==$("#message").val())return alert("Please enter Feedback / Suggestions."),$("#message").focus(),!1;if(1==confirm("Are you sure you want to submit feedback?")){$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var e={};e.product=$("#Product").val(),e.name=$("#Name").val(),e.phoneNO=$("#phoneNO").val(),e.message=$("#message").val(),e.kdetails=f,$.ajax({type:"POST",url:contextCommon+"savefeedback",data:JSON.stringify(e),success:function(t){alert("Thank you for your feedback. We will contact you soon"),location.href="ContactForm.html"},error:function(t){alert("Error while submitting feedback"),location.href="ContactForm.html"}})}}function submitNewBusinessDetails(t){if(""==$("#Name").val())return alert("Please enter your Name."),$("#Name").focus(),!1;if(""==$("#phoneNO").val()||10!=$("#phoneNO").val().length)return alert("Please enter valid Mobile Number."),$("#phoneNO").focus(),!1;if(checkValidEmailID($("#email").val()))return alert("Please enter valid Email ID."),$("#email").focus(),!1;if(""==$("#message").val())return alert("Please enter Message."),$("#message").focus(),!1;if(1==confirm("Are you sure you want to Sign up now for Online Business?")){$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var e={};e.emailId=$("#email").val(),e.shopBusinessName=$("#ShopName").val(),e.productDetails=$("#ProductDetails").val(),e.name=$("#Name").val(),e.mobileNo=$("#phoneNO").val(),e.messageDetails=$("#message").val(),e.kdetails=f,$.ajax({type:"POST",url:contextCommon+"saveSignUpInfo",data:JSON.stringify(e),success:function(t){alert("Thank you for your Registration. We will contact you soon"),location.reload()},error:function(t){alert("Error while Registration"),location.reload()}})}}function initMoneyCalc(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"checkPassword",data:t,success:function(t){setTimeout(hidePopup,500),$("#moneyCalcForm").show()},error:function(t){setTimeout(hidePopup,500),alert("Invalid Password")}})}function calcuateMoney(){if(""==$("#fromDate").val()||""==$("#toDate").val())return alert("Please enter From date / To date"),!1;$("#lodaingModal").modal("show");var t={};t.fromDate=$("#fromDate").val(),t.toDate=$("#toDate").val(),t.password=$("#password").val(),$.ajax({type:"POST",url:context+"getMoneyDetails",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),showMoneyTable(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function showMoneyTable(t){var e="<table id='moneyCalcTable' class='table table-striped table-bordered table-hover'><thead><tr><td width='5%'>#</td><td width='25%'>Contact Details</td><td width='25%'>Payment Info</td><td width='45%'>Order Details</td></tr></thead><tbody>",a=0,r=0;$(t).each(function(t,o){a+=parseInt($(o).attr("finalPrice"));var i="<ol>";$($($(o).attr("orderDetailsList"))).each(function(t,e){i=i+"<li>"+$(e).attr("description")+"</li>"}),i+="</ol>";var n="";if(""!=$("#commissionCalc").val()){var s=parseInt($(o).attr("finalPrice"))*parseInt($("#commissionCalc").val())/100;n="<li> As per "+$("#commissionCalc").val()+"% : <b>"+s+" Rs</b></li>",r+=s}var l="<li>Name: "+$($(o).attr("user")).attr("userName")+"</li>";"A"==$("#contactDetails").val()&&(l=l+"<li>Mobile No: "+$($(o).attr("user")).attr("mobileNo")+"</li><li>Address: "+$($(o).attr("user")).attr("address")+"</li>"),e=(e=(e=e+"<tr><td>"+ ++t+"</td><td><ul>"+l+"</ul></td>")+"<td><ul><li>Order ID: "+$(o).attr("orderid")+"</li><li>Date:"+$(o).attr("datetime")+"</li><li>Final Price: <b>"+$(o).attr("finalPrice")+" Rs</b></li><li>Delivery Charges: "+$(o).attr("deliveryCharge")+" Rs</li><li>Discount: "+$(o).attr("discount")+" Rs</li><li>OrderStatus: "+$(o).attr("orderStatus")+"</li>"+n+"</td>")+"<td>"+i+"</td></tr>",$("#moneyTable").html(e)});var o="",i="";0!=r&&(o=" Total Share Amount is: <b>"+Math.trunc(r)+"</b> Rs.",i=" Total Share Amount is: "+Math.trunc(r)+" Rs. ");var n="Total Transaction made is "+$(t).length+". Total Transaction Amount is: <b>"+a+" Rs</b>."+o+'&nbsp;&nbsp;&nbsp;<input type="submit" value="Export PDF"  onclick="return exportPDF()" class="btn btn-primary">';$("#moneySummaryTable").html("<div class='col-md-12'>"+n+"</div>");var s="From:"+$("#fromDate").val()+" To:"+$("#toDate").val(),l="Total Transaction made is "+$(t).length+". Total Transaction Amount is: "+a+" Rs."+i+s,d=(doc=new jsPDF("1","pt","a4")).autoTableHtmlToJson(document.getElementById("moneyCalcTable"));doc.setFontSize(15),doc.text(40,40,$("#serviceArea").html()+" "+typeName+"Service"),doc.setFontSize(9),doc.setTextColor(255,0,0),doc.text(40,60,l),doc.autoTable(d.columns,d.data,{startY:!1,margin:{top:70},theme:"grid",tableWidth:"auto",columnWidth:"wrap",showHeader:"everyPage",tableLineColor:200,tableLineWidth:0,columnStyles:{0:{columnWidth:30},1:{columnWidth:125},2:{columnWidth:136},3:{columnWidth:250}},headerStyles:{theme:"grid"},styles:{overflow:"linebreak",columnWidth:"wrap",font:"arial",fontSize:10,cellPadding:8,overflowColumns:"linebreak"}})}function exportPDF(){doc.save(typeName+"Billing.pdf")}function checkPassCustNotifcation(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:contextCommon+"checkPassword",data:t,success:function(t){setTimeout(hidePopup,500),$(".notificationDetails").show()},error:function(t){setTimeout(hidePopup,500),alert("Invalid Password")}})}function sendNotificationToAllCust(){if(1==confirm("Are you sure you want to send Notification to all Customer?")){$("#lodaingModal").modal("show");var t={};t.msgToSend=$("#msgToSend").val(),t.password=$("#password").val(),$.ajax({type:"POST",url:contextCommon+"sendSMSAllCust",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),alert(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}}function sendNotificationToSpecificCust(){if(1==confirm("Are you sure you want to send Notification to Specific Customer?")){$("#lodaingModal").modal("show");var t={};t.msgToSend=$("#msgToSendspeficCust").val(),t.password=$("#password").val(),t.mobileNoList=$("#mobileNoList").val(),$.ajax({type:"POST",url:contextCommon+"sendSMSCustomCust",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),alert(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}}function hidePlaySToreIconIfApp(){"true"==sessionStorage.getItem("appview")&&$(".playStoreIcon").hide()}function alertPopUpAdd(){$("body").append('<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Notification</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><h5 id="alertMsg">Please wait you data is been progress </h5></div><div class="modal-footer" id="footerSection"><button type="button" onClick="return hidePopUp2()" class="btn btn-primary">Close</button></div></div></div></div>')}function confirmAddOkCancel(){$("#lodaingModal").find(".modal-footer").html('<button type="button" onClick="return confirmPayment()" class="btn btn-primary">Confirm Order</button><button type="button" onClick="return hideConfirmPopUp()" class="btn btn-primary">Cancel</button>')}function confirmAddClose(){$("#lodaingModal").find(".modal-footer").html('<button type="button" class="btn btn-primary" id="closeButton" onClick="return closePopup()">Close</button>&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-primary" id="closeFeedbackButton" onClick="closeAndFeedback()">Close and Feedback</button>')}function hideConfirmPopUp(){$("#lodaingModal").modal("hide")}function hidePopUp2(){$("#alertModal").modal("hide")}function initFeedBackVendors(){initLData(),$.ajax({type:"POST",url:contextCommon+"vendorList",data:JSON.stringify(map),success:function(t){var e="";$.each(t,function(t,a){e=e+"<option value="+t+">"+a+"</option>"}),e+="<option value='O'>Others</option>",$("#Product").append(e);var a=window.location.search;if(""!=a){var r=atob(a.substr(1)).split("#");$("#Product").val(r[0]),$("#Name").val(r[1]),$("#phoneNO").val(r[2]),$("#message").focus()}else $("#Product").val("O")},error:function(t){alert("Error Occur please contact Admin")}})}function openCoupanPopUp(){$("#vendorModal").attr("style","display:none;"),$("#coupanModal").modal("show")}function saveCloseCoupanPopUp(){var t=new Array;$("#coupanForm tbody tr").each(function(){rowData=$(this).find("input, select").serializeArray();var e={};$.each(rowData,function(t,a){e[a.name]=a.value}),t.push(e)});var e=!0,a=new Array;$.each(t,function(t,r){"DR"!=$(r).attr("type")&&"DP"!=$(r).attr("type")&&"OR"!=$(r).attr("type")&&"OP"!=$(r).attr("type")||""!=$(r).attr("code")&&""!=$(r).attr("discount")&&""!=$(r).attr("description")&&""!=$(r).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),e=!1),"ND"==$(r).attr("type")&&(""!=$(r).attr("code")&&""!=$(r).attr("description")&&""!=$(r).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),e=!1)),"VR"!=$(r).attr("type")&&"VP"!=$(r).attr("type")||(""!=$(r).attr("code")&&""!=$(r).attr("discount")&&""!=$(r).attr("description")&&""!=$(r).attr("validFrom")&&""!=$(r).attr("validTo")&&""!=$(r).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),e=!1),(checkValidDateFormat($(r).attr("validFrom"))||checkValidDateFormat($(r).attr("validTo")))&&(alert("Please enter valid ValidFrom and ValidTo date, example use format '09/07/2020 07:40 PM' for Row No "+ ++t),e=!1)),a.push($(r).attr("code").toLowerCase())}),checkIfDuplicateExists(a)&&(alert("Duplicate Coupan Code exists. Coupan code must be unique."),e=!1),e&&($("#vendorModal").attr("style","display:block;"),$("#coupanModal").modal("hide"))}function checkValidDateFormat(t){return!(19==t.length&&3==t.split("/").length&&2==t.split(":").length&&3==t.split(" ").length&&(-1!=t.indexOf("AM")||-1!=t.indexOf("PM")))}function addNewCoupan(){var t=$("#coupanRows > tr:last > td:first").html();null==t?t=1:t++;var e='<tr id="coupanRowDetails'+t+'"><td>'+t+"</td><td>"+coupanTypes(t)+'</td><td><input type="hidden" name="id" value="'+t+'" /><input type="text" name="code" size="10"/></td><td><input name="discount" type="number" min="0" max="50" class="component'+t+'"/></td><td>'+coupanStatus(t)+'</td><td><input type="text" name="validFrom" size="14" placeholder="dd/MM/YYYY hh:mm AM/PM" class="component'+t+'"/></td><td><input type="text" placeholder="dd/MM/YYYY hh:mm AM/PM" size="14" name="validTo" class="component'+t+'" /></td><td><input type="text" size="2" maxlength="4" name="amountGreater" /></td><td><input type="text" size="14" name="description" /></td><td><input type="button" value="Remove" onClick="return removeCoupanRow('+t+')" /></td></tr>';return $("#coupanRows").append(e),coupanTypeChange($("#coupanType_"+t),t),t}function coupanTypes(t){return'<select id="coupanType_'+t+'" name="type" onchange="return coupanTypeChange(this,'+t+')" ><option value="DR">Discount Rs</option><option value="DP">Discount %</option><option value="ND">No Delivery Charge</option><option value="OR">One Time Rs</option><option value="OP">One Time %</option><option value="VR">Validity Rs</option><option value="VP">Validity %</option></select>'}function coupanStatus(t){return'<select id="" name="status" class="component'+t+'"><option value="E">Enable</option><option value="D">Disable</option></select>'}function removeCoupanRow(t){$("#coupanRowDetails"+t).remove()}function checkIfDuplicateExists(t){return new Set(t).size!==t.length}function coupanTypeChange(t,e){$(".component"+e).hide(),"OR"!=$(t).val()&&"OP"!=$(t).val()||($(t).parent().parent().find("td").eq(4).find("select").show(),$(t).parent().parent().find("td").eq(3).find(".component"+e).show()),"VR"!=$(t).val()&&"VP"!=$(t).val()||($(t).parent().parent().find("td").eq(5).find(".component"+e).show(),$(t).parent().parent().find("td").eq(6).find(".component"+e).show(),$(t).parent().parent().find("td").eq(3).find(".component"+e).show()),"DP"!=$(t).val()&&"DR"!=$(t).val()||$(t).parent().parent().find("td").eq(3).find(".component"+e).show(),"ND"==$(t).val()&&$(t).parent().parent().find("td").eq(3).find(".component"+e).hide()}function viewOrderHistory(t){$("#errorId").html("");var e=$("#mobileNo").val().trim();if(""==e||10!=e.length)return $("#errorId").html("Please enter valid Mobile No"),!1;$(t).attr("disabled",!0),$(t).attr("value","Please wait ..."),$.ajax({type:"POST",url:context+"checkValidMobileNo",data:'{"mobileNo":"'+e+'"}',success:function(a){$(t).attr("disabled",!1),$(t).attr("value","View Order History"),"Y"!=a?$("#errorId").html(a):($("#OTPConfirmID").val(""),$("#OTPModal").modal("show").on("shown.bs.modal",function(){$("#OTPConfirmID").trigger("focus")}),$("#OTPlabel").html("Enter OTP send to "+e+" Mobile Number."))},error:function(t){alert("Something went wrong")}})}function closeMyOrderPopUp(){$("#OTPModal").modal("hide")}function verifyOTP(t){$("#errorMsgid").hide();var e=$("#mobileNo").val().trim(),a=$("#OTPConfirmID").val().trim();if(""==a||4!=a.length)return $("#errorMsgid").show(),!1;$(t).attr("disabled",!0),$(t).attr("value","Please wait ..."),$.ajax({type:"POST",url:context+"orderDetailsByMobileNo",data:'{"mobileNo":"'+e+'","otp":"'+a+'"}',success:function(e){$("#OTPModal").modal("hide"),$(t).attr("disabled",!1),$(t).attr("value","Confirm OTP"),prepareOrderHistoryList(e)},error:function(e){$("#errorMsgid").show(),$(t).attr("disabled",!1),$(t).attr("value","Confirm OTP")}})}function prepareOrderHistoryList(t){$("#orderHistoryLogo").hide(),$("#orderDetails").html("");var e="",a="",r=1,o="";$(t).each(function(t,i){var n=' For more Order information <a target="_blank" href="ViewOrders.html?'+$(i).attr("orderid")+'" >Click here</a>.',s="";null!=$(i).attr("additionalNote")&&'""'!=$(i).attr("additionalNote")&&(s=", <b>Additional Info:</b>"+$(i).attr("additionalNote"));var l="<ol>";$($($(i).attr("orderDetailsList"))).each(function(t,e){l=l+"<li>"+$(e).attr("description")+"</li>"}),a!=$(i).attr("datetime").substr(0,10)?(e=e.replace("#runtime#",o),o=(o="")+"<p>"+r+'.<input type="hidden" value="'+l+'" id="datadesc'+r+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+r+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> On <b>"+$(i).attr("datetime").substr(11)+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,e=e+'<div class="col-sm-12"><div class="cart-wrap ftco-animate fadeInUp ftco-animated"><div class="cart-total mb-3"><h3>'+$(i).attr("datetime").substr(0,10)+'</h3><div id="detailssub">#runtime#</div></div></div></div>',a=$(i).attr("datetime").substr(0,10)):o=o+"<p>"+r+'.<input type="hidden" value="'+l+'" id="datadesc'+r+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+r+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> On <b>"+$(i).attr("datetime").substr(11)+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,r++}),e=e.replace("#runtime#",o),$("#orderDetails").append(e),$("#orderHistoryLogo").show()}