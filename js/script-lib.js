var myCurrentReq=document.getElementById("myscriptLib").getAttribute("myCustomAttrib"),map={},context=dm+"dev/"+myCurrentReq+"/",contextCommon=dm+"dev/common/",category=myCurrentReq.charAt(0).toUpperCase(),typeName=category+myCurrentReq.substr(1),fetchMethod="getAll"+typeName+"Products",successUrl=typeName+"index.html",saveMethod="save"+typeName+"Orders",masterMethod="get"+typeName+"MasterData",minOrder,finalCPrice;function initMap(t){$("#lodaingModal").modal("show"),alertPopUpAdd(),$.ajax({type:"POST",url:context+fetchMethod,success:function(a){$(a).each(function(){map[$(this).attr("productId")]=$(this).attr("productName")+","+$(this).attr("stockStatus")+","+JSON.stringify($(this).attr("productDetailsList"))}),"H"==t&&generateProduct(),localStorage.setItem(myCurrentReq+"mymap",JSON.stringify(map)),setTimeout(hidePopup,600)},error:function(t){setTimeout(hidePopup,600),alert(t)}})}function hidePopup(){$("#lodaingModal").modal("hide")}function cardCount(){var t=0,a=localStorage.getItem(myCurrentReq+"card");null!=a&&$.each(a.split(","),function(a,e){"null"!=e&&""!=e&&""!=e.split("#")[0]&&t++}),$(".cardCount").html("["+t+"]")}function addtoCard(t,a){var e=t+"#"+$("#qtyID"+t).val()+"#"+$("#catgID"+t).find(":selected").attr("data-id");return localStorage.setItem(myCurrentReq+"card",localStorage.getItem(myCurrentReq+"card")+","+e),cardCount(),$("#alertMsg").html(map[t].split(",")[0]+" successfully added to cart."),$("#alertModal").modal("show"),!1}cardCount(),hidePlaySToreIconIfApp();var isCoupancase="N",f="",doc;function mainTotal(t){$.ajax({type:"POST",url:context+"calcRebInt",data:'{"coupan":"'+$("#coupontxt").val()+'","carddetails":"'+localStorage.getItem(myCurrentReq+"card").substr(5)+'"}',success:function(a){$("#finalTotal").html($(a)[0]+" Rs"),$("#disc").html($(a)[1]+" Rs"),$("#deliveryCharge").html($(a)[2]+" Rs"),$("#mainTotal").html($(a)[3]+" Rs"),$("#deliveryDesc").html($(a)[5]),finalCPrice=$(a)[3],minOrder=$(a)[4],"Y"==t&&($("#alertMsg").html($(a)[8]),$("#alertModal").modal("show"),isCoupancase="Y"==$(a)[6]?"Y":"N")},error:function(t){$("#lodaingModal").modal("hide"),$("#closeButton").show(),alert(t)}}),initLData()}function initLData(){$.getJSON("https://ipapi.co/json/",function(t){f="IP:"+$(t).attr("ip")+", City:"+$(t).attr("city")+", Region:"+$(t).attr("region")+", postal:"+$(t).attr("postal")+", latitude:"+$(t).attr("latitude")+", longitude:"+$(t).attr("longitude")+", org:"+$(t).attr("org"),f=btoa(f)})}function removeProduct(t,a){disc=0;var e=localStorage.getItem(myCurrentReq+"card");return e=e.replace(t,""),localStorage.setItem(myCurrentReq+"card",e),$("#sectiondetails"+a).remove(),mainTotal(),cardCount(),!1}function initCart(){alertPopUpAdd(),map=JSON.parse(localStorage.getItem(myCurrentReq+"mymap")),displayCardDetails(),mainTotal(),checkPreviousCartValue()}function displayCardDetails(){var t="";"A"==category&&(t="display:none");var a=localStorage.getItem(myCurrentReq+"card");null!=a&&$.each(a.split(","),function(a,e){if("null"!=e&&""!=e){var o=e.split("#")[1];null==o&&(o=1);var r=e.split("#")[0];if(""!=r){var i=map[r].substr(map[r].indexOf("{")-1),n=JSON.parse(i);n=$(n).get(e.split("#")[2]);var s=$(n).attr("minPrice")*o,l="return removeProduct('"+e+"',"+a+")",d='<div class="col-md-6 col-lg-3 ftco-animate fadeInUp ftco-animated" id="sectiondetails'+a+'"><div class="product"><a href="javascript:void(0)" style="text-align: center" class="img-prod"><img class="img-fluid" src="images/product-'+r+'.jpg" alt="Colorlib Template"><div class="overlay"></div></a><div class="text pb-4 px-3 text-center"><h3><a href="javascript:void(0)">'+map[r].substr(0,map[r].indexOf(","))+"</a></h3><h5>"+$(n).attr("productDesc")+'</h5><div class="pricing123"><p class="price"><span class="price-sale" style="'+t+'" >Price - '+$(n).attr("minPrice")+' Rs</span><br><span style="'+t+'" class="price-sale">&nbsp;&nbsp;Quantity - '+o+'</span><br><span class="price-sale" style="'+t+'">&nbsp;&nbsp;Final Price - '+s+' Rs</span><br><span class="price-sale">&nbsp;&nbsp;<input type="button" value="Remove from cart" onclick="'+l+'" class="btn btn-primary"  ></span><span class="total" style="display:none" data-val="'+r+","+o+'" id="totVal'+a+'">'+s+" Rs</span></p></div></div></div></div>";$("#cardDetailsData").append(d)}}})}function checkQty(t){""!=$(t).val().trim()&&($(t).val()>0&&$(t).val()<100||$(t).val("1"))}function checkQtyStatus(t){""==$(t).val().trim()&&$(t).val("1")}function generateProduct(){$.map(map,function(t,a){t.split(",")[0];var e=t.split(",")[1],o=t.substr(t.indexOf(",")+1),r=JSON.parse(o.substr(o.indexOf(",")+1)),i="",n="",s="",l="<br> Category ",d="";1==r.length&&(d+="style=display:none;",l=l+": <a href='javascript:void(0)' style='color: black;'>"+$(r).eq(0).attr("productDesc")+"</a>"),l=l+"<select id='catgID"+a+"' onchange='return calcPrice(this,"+a+")' "+d+">";var c=0;$(r).each(function(){"D"!=$(this).attr("stockStatus")&&(l=l+"<option data-id='"+$(this).attr("id")+"' data-max='"+$(this).attr("maxPrice")+"' data-dis='"+$(this).attr("discount")+"' data-min='"+$(this).attr("minPrice")+"' value='"+$(this).attr("productDesc")+"'>"+$(this).attr("productDesc")+"</option>",0==c&&(i=$(this).attr("minPrice"),n=$(this).attr("maxPrice"),s=$(this).attr("discount")),c++)}),l+="</select>";var u=t.split(",");if("D"!=e){var p,m="",v="";n!=i&&(m=s,v="status"),p="Y"==e?'<br><span> Quantity <input type="number" id="qtyID'+a+'" value="1" min="1" max="99" onblur="return checkQtyStatus(this)" onKeyup="return checkQty(this)" size="4" style="margin-bottom: 6px;text-align: center;"></span><input type="button" onClick="return addtoCard('+a+',this)" class="btn btn-primary" value="Add to Cart">':'<br><span class="btn btn-danger">Out of Stock</span>';var f='<div class="col-md-6 col-lg-3 ftco-animate fadeInUp ftco-animated productNameClass" data-id="'+u[0]+'" ><div class="product"><a href="javascript:void(0)" class="img-prod" style="text-align: center"><img class="img-fluid" src="images/product-'+a+'.jpg" alt="No Image" style="height: 190px;width: 190px;"><span id="discountSec'+a+'" class="'+v+'">'+m+'</span><div class="overlay"></div></a><div class="text pb-4 px-3 text-center"><h3><a href="javascript:void(0)">'+u[0]+'</a></h3><div class=""><div class="pricing123"><p class="price"  ><span id="priceSection'+a+'">'+getAmountDesc(n,i,s,a)+'</span><span class="price-sale" >'+l+"</span>"+p+"</p></div></div></div></div></div>";$("#productDetails").append(f)}});var t="<div class='row'><div class='col-md-12' align='center'><a href='"+$(".icon-shopping_cart").parent().attr("href")+"' class='nav-link'> <span class='btn btn-primary py-3 px-5' style='font-size: 25px;color:black;'>Proceed For Order &nbsp;&nbsp;<span class='icon-shopping_cart w3-large'></span><span class='cardCount' style='font-size: 25px;black;'></span></span></a></div></div>";$("#productDetails").parent().append(t)}function getAmountDesc(t,a,e,o){var r="";return t==a?(r='<span  class="price-sale" id="maxP'+o+'" >Our Price '+a+" Rs</span>",$("#discountSec"+o).removeClass("status").html("")):(r='<span  class="mr-2 price-dc" id="maxP'+o+'" >MRP '+t+' Rs</span><br><span class="price-sale" id="minP'+o+'" >Our Price '+a+" Rs</span>",$("#discountSec"+o).addClass("status").html(e)),r}function calcPrice(t,a){var e=getAmountDesc($(t).find(":selected").attr("data-max"),$(t).find(":selected").attr("data-min"),$(t).find(":selected").attr("data-dis"),a);$("#priceSection"+a).html(e)}function displaySearchResult(t){""!=$(t).val()?$(".productNameClass").each(function(){-1==$(this).attr("data-id").toLowerCase().indexOf($(t).val().toLowerCase())&&$(this).hide()}):$(".productNameClass").show()}function closePopup(){$("#lodaingModal").modal("hide"),localStorage.removeItem(myCurrentReq+"mymap"),localStorage.removeItem(myCurrentReq+"card"),location.href=successUrl}function closeAndFeedback(){location.href=$("#feedbackId").attr("href")}function applyCoupon(){return mainTotal("Y"),!1}function placeOrder(){return null==minOrder||null==finalCPrice?($("#alertMsg").html("Please add some items in cart before placing order."),$("#alertModal").modal("show"),!1):parseInt(minOrder)>parseInt(finalCPrice)?($("#alertMsg").html("Sorry you must have minimum order of "+minOrder+" Rs."),$("#alertModal").modal("show"),!1):""==$("#fname").val()?($("#alertMsg").html("Please enter your Name."),$("#alertModal").modal("show"),$("#fname").focus(),!1):""==$("#streetAddress").val()?($("#alertMsg").html("Please enter Address."),$("#alertModal").modal("show"),$("#streetAddress").focus(),!1):""==$("#mobileNo").val()?($("#alertMsg").html("Please enter Mobile Number."),$("#alertModal").modal("show"),$("#mobileNo").focus(),!1):10!=$("#mobileNo").val().length?($("#alertMsg").html("Please enter 10 digit Mobile Number."),$("#alertModal").modal("show"),$("#mobileNo").focus(),!1):""==$("#emailid").val()?($("#alertMsg").html("Please enter emailid."),$("#alertModal").modal("show"),$("#emailid").focus(),!1):(confirmAddOkCancel(),$("#orderConfirmationContent").html("Are you sure you want to place order?"),$("#lodaingModal").modal("show"),void saveCardDetails())}function confirmPayment(){$("#orderConfirmationContent").html("Order in Process. Please Wait..."),$("#lodaingModal").find(".modal-footer").html("");var t={};t.userName=$("#fname").val()+" "+$("#lname").val(),t.address=$("#sector").val()+", "+$("#apartment").val()+", "+$("#streetAddress").val()+", "+$("#city").val()+", "+$("#pincode").val(),t.emailid=$("#emailid").val(),t.mobileNo=$("#mobileNo").val(),t.additionalNote=$("#additionalNote").val(),t.inputdata=f,t.carddetails=localStorage.getItem(myCurrentReq+"card").substr(5),t.coupan="Y"==isCoupancase?$("#coupontxt").val():"",$.ajax({type:"POST",url:context+saveMethod,data:JSON.stringify(t),success:function(t){$("#closeFeedbackButton").show(),t+="<br><b>Note:</b> Above information is also send to you, on your EmailID.<br><br>",$("#orderConfirmationContent").html(t),confirmAddClose()},error:function(t){$("#lodaingModal").modal("hide"),$("#closeButton").show(),alert(t)}})}function saveCardDetails(){var t={};t.fname=$("#fname").val(),t.lname=$("#lname").val(),t.sector=$("#sector").val(),t.streetAddress=$("#streetAddress").val(),t.apartment=$("#apartment").val(),t.city=$("#city").val(),t.pincode=$("#pincode").val(),t.mobileNo=$("#mobileNo").val(),t.emailid=$("#emailid").val(),localStorage.setItem("mycarddetails",JSON.stringify(t))}function checkPreviousCartValue(){var t=JSON.parse(localStorage.getItem("mycarddetails"));null!=t&&jQuery.each(t,function(t,a){$("#"+t).val(a)})}function initMasterRates(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+masterMethod,data:t,success:function(t){setTimeout(hidePopup,500),generateMaster(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function initOrderDetails(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"getOrderHistory",data:t,success:function(t){setTimeout(hidePopup,500),generateDetails(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function displayProfile(){var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"getVendorInfo",data:t,success:function(t){displayProfilePopUp(t)},error:function(t){alert(t.responseJSON)}})}function closeVendorDetails(){$("#vendorModal").modal("hide")}function displayProfilePopUp(t){$("#coupanRows").html(""),$("#vendorModal").modal("show"),$("#vendorName").val($(t).attr("vendorName")),$("#mobileNo").val($(t).attr("mobileNo")),$("#emailid").val($(t).attr("emailid")),$("#minOrder").val($(t).attr("minOrder")),$("#discFormula").val($(t).attr("discFormula")),$("#discountDesc").val($(t).attr("discountDesc")),$("#orderDeliverTime").val($(t).attr("orderDeliverTime")),$("#vendorpassword").val($(t).attr("vendorPassword")),$("#envMode").val($(t).attr("envMode")),$("#idval").val($(t).attr("id")),$("#category").val($(t).attr("category")),$("#offerNote").val($(t).attr("offerNote")),$.each($(t).attr("coupansList"),function(t,a){var e=addNewCoupan();$("#coupanRowDetails"+e).find("td").eq(1).find('select[name="type"]').val($(a).attr("type")),$("#coupanRowDetails"+e).find("td").eq(2).find('input[name="id"]').val($(a).attr("id")),$("#coupanRowDetails"+e).find("td").eq(2).find('input[name="code"]').val($(a).attr("code")),$("#coupanRowDetails"+e).find("td").eq(3).find('input[name="discount"]').val($(a).attr("discount")),$("#coupanRowDetails"+e).find("td").eq(4).find('select[name="status"]').val($(a).attr("status")),$("#coupanRowDetails"+e).find("td").eq(5).find('input[name="validFrom"]').val($(a).attr("validFrom")),$("#coupanRowDetails"+e).find("td").eq(6).find('input[name="validTo"]').val($(a).attr("validTo")),$("#coupanRowDetails"+e).find("td").eq(7).find('input[name="amountGreater"]').val($(a).attr("amountGreater")),$("#coupanRowDetails"+e).find("td").eq(8).find('input[name="description"]').val($(a).attr("description")),coupanTypeChange($("#coupanType_"+e),e)})}function updateVendorDetails(){var t=new Array;$("#coupanForm tbody tr").each(function(){rowData=$(this).find("input, select").serializeArray();var a={};$.each(rowData,function(t,e){a[e.name]=e.value}),t.push(a)});var a={};a.vendorName=$("#vendorName").val(),a.mobileNo=$("#mobileNo").val(),a.emailid=$("#emailid").val(),a.minOrder=$("#minOrder").val(),a.discFormula=$("#discFormula").val(),a.discountDesc=$("#discountDesc").val(),a.orderDeliverTime=$("#orderDeliverTime").val(),a.vendorPassword=$("#vendorpassword").val(),a.envMode=$("#envMode").val(),a.coupansList=t,a.id=$("#idval").val(),a.category=$("#category").val(),a.offerNote=$("#offerNote").val(),a.password=$("#password").val(),$.ajax({type:"POST",url:context+"saveVendorInfo",data:JSON.stringify(a),success:function(t){alert("Updated sucessfully.")},error:function(t){alert("Error. Please contact support")}})}function generateMaster(t){var a="<input type='button' onclick='return displayProfile();' value='View Update Profile' class='btn btn-primary' />";a+="<table><tr><th>ID</th><th>Product Name</th><th>Status</th><th>Product Description</th><th>Min Price</th><th>Max Price</th><th>Status</th><th>Update</th></tr>";var e=1;$(t).each(function(t,o){a=a+'<tr data-id="'+t+'"><td><input type="text" size="1" data-id="'+$(o).attr("id")+'" id="productId'+t+'" readonly value="'+$(o).attr("productId")+'"></td><td><input id="productName'+t+'" type="text" value="'+$(o).attr("productName")+'"></td><td><input type="text" size="2" id="stockStatusM'+t+'" value="'+$(o).attr("stockStatus")+'"></td><td></td><td></td><td></td><td></td><td><input type="button" class="btn btn-primary" onClick="return updateRow('+t+')" value="Update" /><input type="button" class="btn btn-primary" onClick="return addNewChild('+t+')" value="Add Child Record" /></tr>',$($(o).attr("productDetailsList")).each(function(e,o){a=a+'<tr><td></td><td></td><td></td><td><input class="productdesc'+t+'" type="text" value="'+$(this).attr("productDesc")+'"></td><td><input type="text" class="minVal'+t+'" size="2" value="'+$(this).attr("minPrice")+'"></td><td><input class="maxVal'+t+'" type="text" size="2" value="'+$(this).attr("maxPrice")+'"></td><td><input type="text" size="2" class="stockStatus'+t+'" value="'+$(this).attr("stockStatus")+'"></td></tr>'}),e=$(o).attr("productId")}),$("#orderDetails").html(addNewRow(a,++e))}function addNewRow(t,a){return t=(t=t+'<tr><td><input type="text" size="1" data-id="" id="productId'+a+'" value="'+a+'"></td><td><input id="productName'+a+'" type="text"></td><td><input type="text" size="2" id="stockStatusM'+a+'" ></td><td></td><td></td><td></td><td></td><td><input type="button" class="btn btn-primary" onClick="return updateRow('+a+')" value="Add New Record" /><input type="button" class="btn btn-primary" onClick="return addNewChild('+a+')" value="Add Child Record" /></td></tr>')+'<tr data-id="'+a+'"><td></td><td></td><td></td><td><input class="productdesc'+a+'" type="text" ></td><td><input type="text" class="minVal'+a+'" size="2" ></td><td><input class="maxVal'+a+'" type="text" size="2" ></td><td><input type="text" size="2" class="stockStatus'+a+'" ></td></tr></table>'}function addNewChild(t){var a='<tr><td></td><td></td><td></td><td><input class="productdesc'+t+'" type="text" ></td><td><input type="text" class="minVal'+t+'" size="2" ></td><td><input class="maxVal'+t+'" type="text" size="2" ></td><td><input type="text" size="2" class="stockStatus'+t+'" ></td></tr></table>';$("table > tbody ").find("[data-id='"+t+"']").after(a)}function updateRow(t){$("#lodaingModal").modal("show");var a={};a.password=$("#password").val();var e=0,o="";if($(".productdesc"+t).each(function(){if(" "!=$(".maxVal"+t).eq(e).val()){var a=parseInt($(".maxVal"+t).eq(e).val())-parseInt($(".minVal"+t).eq(e).val());a=0==(a=a/parseInt($(".maxVal"+t).eq(e).val())*100)?" ":Math.trunc(a)+"%"}else a=" ";""!=$(this).val()&&(o=o+$(".minVal"+t).eq(e).val()+"#"+$(".maxVal"+t).eq(e).val()+"#"+$(".stockStatus"+t).eq(e).val()+"#"+a+"#"+$(this).val()+","),e++}),a.details=o.substr(0,o.length-1),a.productName=$("#productName"+t).val(),a.stockStatus=$("#stockStatusM"+t).val()," "!=$(".maxVal"+t).val()){var r=parseInt($("#maxVal"+t).val())-parseInt($("#minVal"+t).val());r=0==(r=r/parseInt($("#maxVal"+t).val())*100)?" ":Math.trunc(r)+"%"}else r=" ";return a.productId=$("#productId"+t).val(),a.id=$("#productId"+t).attr("data-id"),updateTables(JSON.stringify(a),"updateProductMaster","initMasterRates"),!1}function generateDetails(t){$("#orderDetails").html("");var a="",e="",o=1,r="";$(t).each(function(t,i){var n="";"Delivered"!=$(i).attr("orderStatus")&&"Cancelled"!=$(i).attr("orderStatus")&&(n='<select id="statusddval'+o+'"><option value="In-Progress">In-Progress</option><option value="Delivered">Delivered</option><option value="UnReachable">UnReachable</option><option value="Out of Stock">Out of Stock</option><option value="Cancelled">Cancelled</option></select>&nbsp;&nbsp;<input type="button" data-id="'+$(i).attr("id")+'"  data-emailid="'+$($(i).attr("user")).attr("emailid")+'" data-name="'+$($(i).attr("user")).attr("userName")+'" class="btn btn-primary" onclick="return updatestatus(this,'+o+')" value="update" />');var s="";null!=$(i).attr("additionalNote")&&'""'!=$(i).attr("additionalNote")&&(s=", <b>Additional Info:</b>"+$(i).attr("additionalNote"));var l="<ol>";$($($(i).attr("orderDetailsList"))).each(function(t,a){l=l+"<li>"+$(a).attr("description")+"</li>"}),e!=$(i).attr("datetime").substr(0,10)?(a=a.replace("#runtime#",r),r=(r="")+"<p>"+o+'.<input type="hidden" value="'+l+'" id="datadesc'+o+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+o+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> using Mobile No. <b>"+$($(i).attr("user")).attr("mobileNo")+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,a=a+'<div class="col-sm-12"><div class="cart-wrap ftco-animate fadeInUp ftco-animated"><div class="cart-total mb-3"><h3>'+$(i).attr("datetime").substr(0,10)+'</h3><div id="detailssub">#runtime#</div></div></div></div>',e=$(i).attr("datetime").substr(0,10)):r=r+"<p>"+o+'.<input type="hidden" value="'+l+'" id="datadesc'+o+'" /> <input type="button" data-id='+$(i).attr("id")+'  class="btn btn-primary"  onClick="return viewOrderDetails(this,'+o+')" value="OrderDetails" /> OrderId <b>'+$(i).attr("orderid")+"</b> placed by <b>"+$($(i).attr("user")).attr("userName")+"</b> using Mobile No. <b>"+$($(i).attr("user")).attr("mobileNo")+"</b> with Total amount <b>"+$(i).attr("finalPrice")+" Rs. Address Details :</b> "+$($(i).attr("user")).attr("address")+s+". having order status <b>"+$(i).attr("orderStatus")+"</b>."+n,o++}),a=a.replace("#runtime#",r),$("#orderDetails").append(a)}function viewOrderDetails(t,a){$("#exampleModalLabel").html("Below are Order Details"),$(".modal-body").html($("#datadesc"+a).val()+"</ol>"),$("#lodaingModal").modal("show")}function updatestatus(t,a){var e={};e.category=category,e.password=$("#password").val(),e.masterid=$(t).attr("data-id"),e.status=$("#statusddval"+a).val(),e.name=$(t).attr("data-name"),e.emailid=$(t).attr("data-emailid"),updateTables(JSON.stringify(e),"updateOrderStatus","initOrderDetails")}function updateTables(data,method,call){$.ajax({type:"POST",url:context+method,data:data,success:function(response){alert(response),eval(call+"()")},error:function(t){alert(t)}})}function submitViewOrder(){$("#ordersection").hide(),$.ajax({type:"POST",url:contextCommon+"findOrder",data:'{"orderid":"'+$("#Orderid").val()+'"}',success:function(t){var a="",e="";null!=$(t).attr("coupanCode")&&(e=", Coupon Used "+$(t).attr("coupanCode")),$("#orderHeader").html("Thank you "+$($(t).attr("user")).attr("userName")+" for placing order."),a=(a=(a=(a=a+"<p> Your order was placed on "+$(t).attr("datetime")+". Order status is <b>"+$(t).attr("orderStatus")+"</b>. </p>")+"<p> Total Amount was  "+$(t).attr("finalPrice")+" Rs, Discount was "+$(t).attr("discount")+" Rs, Delivery charges was "+$(t).attr("deliveryCharge")+" Rs"+e+". </p>")+"<p> Delivery person will contact you on mobile no "+$($(t).attr("user")).attr("mobileNo")+", or email id "+$($(t).attr("user")).attr("emailid")+". </p>")+"<p> Delivery address is "+$($(t).attr("user")).attr("address")+". </p>",a+="<br><p><b>Below are order details</b></p>",a+="<ol>",$($($(t).attr("orderDetailsList"))).each(function(t,e){a=a+"<li>"+$(e).attr("description")+"</li>"}),a+="</ol></br>",$("#detailssub").html(a),$("#ordersection").show(),category=$($(t).attr("master")).attr("catagory")},error:function(t){alert("Please enter valid Order ID. Order ID is send to you via email and SMS.")}})}function refreshMaster(){$.ajax({type:"POST",url:contextCommon+"refreshMaster",data:JSON.stringify(map),success:function(t){alert(t)},error:function(t){alert("Error. Please contact support")}})}function getOfferAll(){$.ajax({type:"POST",url:contextCommon+"mainOfferSection",data:JSON.stringify(map),success:function(t){$(".offerMarqueNote").html("<p>"+t+"</p>")},error:function(t){}})}function getOfferProduct(){$.ajax({type:"POST",url:context+"productOfferSection",data:JSON.stringify(map),success:function(t){$(".offerMarqueNoteDetails").html("<p>"+t+"</p>")},error:function(t){}})}function submitFeedBack(t){if(""==$("#Name").val())return alert("Please enter your Name."),$("#Name").focus(),!1;if(""==$("#phoneNO").val())return alert("Please enter Mobile Number."),$("#phoneNO").focus(),!1;if(""==$("#message").val())return alert("Please enter Feedback / Suggestions."),$("#message").focus(),!1;if(1==confirm("Are you sure you want to submit feedback?")){$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var a={};a.product=$("#Product").val(),a.name=$("#Name").val(),a.phoneNO=$("#phoneNO").val(),a.message=$("#message").val(),a.kdetails=f,$.ajax({type:"POST",url:contextCommon+"savefeedback",data:JSON.stringify(a),success:function(t){alert("Thank you for your feedback. We will contact you soon"),location.href="ContactForm.html"},error:function(t){alert("Error while submitting feedback"),location.href="ContactForm.html"}})}}function submitNewBusinessDetails(t){if(""==$("#Name").val())return alert("Please enter your Name."),$("#Name").focus(),!1;if(""==$("#phoneNO").val())return alert("Please enter Mobile Number."),$("#phoneNO").focus(),!1;if(""==$("#message").val())return alert("Please enter Message."),$("#message").focus(),!1;if(initLData(),1==confirm("Are you sure you want to Sign up now for Online Business?")){$(t).attr("disabled",!0),$(t).attr("value","Please wait ...");var a={};a.emailId=$("#email").val(),a.shopBusinessName=$("#ShopName").val(),a.productDetails=$("#ProductDetails").val(),a.name=$("#Name").val(),a.mobileNo=$("#phoneNO").val(),a.messageDetails=$("#message").val(),a.kdetails=f,$.ajax({type:"POST",url:contextCommon+"saveSignUpInfo",data:JSON.stringify(a),success:function(t){alert("Thank you for your Registration. We will contact you soon"),location.reload()},error:function(t){alert("Error while Registration"),location.reload()}})}}function initMoneyCalc(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:context+"checkPassword",data:t,success:function(t){setTimeout(hidePopup,500),$("#moneyCalcForm").show()},error:function(t){setTimeout(hidePopup,500),alert("Invalid Password")}})}function calcuateMoney(){if(""==$("#fromDate").val()||""==$("#toDate").val())return alert("Please enter From date / To date"),!1;$("#lodaingModal").modal("show");var t={};t.fromDate=$("#fromDate").val(),t.toDate=$("#toDate").val(),t.password=$("#password").val(),$.ajax({type:"POST",url:context+"getMoneyDetails",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),showMoneyTable(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}function showMoneyTable(t){var a="<table id='moneyCalcTable' class='table table-striped table-bordered table-hover'><thead><tr><td width='5%'>#</td><td width='25%'>Contact Details</td><td width='25%'>Payment Info</td><td width='45%'>Order Details</td></tr></thead><tbody>",e=0,o=0;$(t).each(function(t,r){e+=parseInt($(r).attr("finalPrice"));var i="<ol>";$($($(r).attr("orderDetailsList"))).each(function(t,a){i=i+"<li>"+$(a).attr("description")+"</li>"}),i+="</ol>";var n="";if(""!=$("#commissionCalc").val()){var s=parseInt($(r).attr("finalPrice"))*parseInt($("#commissionCalc").val())/100;n="<li> As per "+$("#commissionCalc").val()+"% : <b>"+s+" Rs</b></li>",o+=s}a=(a=(a=a+"<tr><td>"+ ++t+"</td><td><ul><li>Name: "+$($(r).attr("user")).attr("userName")+"</li><li>Mobile No: "+$($(r).attr("user")).attr("mobileNo")+"</li><li>Address: "+$($(r).attr("user")).attr("address")+"</li></td>")+"<td><ul><li>Order ID: "+$(r).attr("orderid")+"</li><li>Date:"+$(r).attr("datetime")+"</li><li>Final Price: <b>"+$(r).attr("finalPrice")+" Rs</b></li><li>Delivery Charges: "+$(r).attr("deliveryCharge")+" Rs</li><li>Discount: "+$(r).attr("discount")+" Rs</li><li>OrderStatus: "+$(r).attr("orderStatus")+"</li>"+n+"</td>")+"<td>"+i+"</td></tr>",$("#moneyTable").html(a)});var r="",i="";0!=o&&(r=" Total Share Amount is: <b>"+Math.trunc(o)+"</b> Rs.",i=" Total Share Amount is: "+Math.trunc(o)+" Rs. ");var n="Total Transaction made is "+$(t).length+". Total Transaction Amount is: <b>"+e+" Rs</b>."+r+'&nbsp;&nbsp;&nbsp;<input type="submit" value="Export PDF"  onclick="return exportPDF()" class="btn btn-primary">';$("#moneySummaryTable").html("<div class='col-md-12'>"+n+"</div>");var s="From:"+$("#fromDate").val()+" To:"+$("#toDate").val(),l="Total Transaction made is "+$(t).length+". Total Transaction Amount is: "+e+" Rs."+i+s,d=(doc=new jsPDF("1","pt","a4")).autoTableHtmlToJson(document.getElementById("moneyCalcTable"));doc.setFontSize(15),doc.text(40,40,$("#serviceArea").html()+" "+typeName+"Service"),doc.setFontSize(9),doc.setTextColor(255,0,0),doc.text(40,60,l),doc.autoTable(d.columns,d.data,{startY:!1,margin:{top:70},theme:"grid",tableWidth:"auto",columnWidth:"wrap",showHeader:"everyPage",tableLineColor:200,tableLineWidth:0,columnStyles:{0:{columnWidth:30},1:{columnWidth:125},2:{columnWidth:136},3:{columnWidth:250}},headerStyles:{theme:"grid"},styles:{overflow:"linebreak",columnWidth:"wrap",font:"arial",fontSize:10,cellPadding:8,overflowColumns:"linebreak"}})}function exportPDF(){doc.save(typeName+"Billing.pdf")}function checkPassCustNotifcation(){$("#lodaingModal").modal("show");var t='{"password":"'+$("#password").val()+'"}';$.ajax({type:"POST",url:contextCommon+"checkPassword",data:t,success:function(t){setTimeout(hidePopup,500),$(".notificationDetails").show()},error:function(t){setTimeout(hidePopup,500),alert("Invalid Password")}})}function sendNotificationToAllCust(){if(1==confirm("Are you sure you want to send Notification to all Customer?")){$("#lodaingModal").modal("show");var t={};t.msgToSend=$("#msgToSend").val(),t.password=$("#password").val(),$.ajax({type:"POST",url:contextCommon+"sendSMSAllCust",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),alert(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}}function sendNotificationToSpecificCust(){if(1==confirm("Are you sure you want to send Notification to Specific Customer?")){$("#lodaingModal").modal("show");var t={};t.msgToSend=$("#msgToSendspeficCust").val(),t.password=$("#password").val(),t.mobileNoList=$("#mobileNoList").val(),$.ajax({type:"POST",url:contextCommon+"sendSMSCustomCust",data:JSON.stringify(t),success:function(t){setTimeout(hidePopup,500),alert(t)},error:function(t){setTimeout(hidePopup,500),alert(t.responseJSON)}})}}function hidePlaySToreIconIfApp(){"true"==sessionStorage.getItem("appview")&&$(".playStoreIcon").hide()}function alertPopUpAdd(){$("body").append('<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Notification</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><h5 id="alertMsg">Please wait you data is been progress </h5></div><div class="modal-footer" id="footerSection"><button type="button" onClick="return hidePopUp2()" class="btn btn-primary">Close</button></div></div></div></div>')}function confirmAddOkCancel(){$("#lodaingModal").find(".modal-footer").html('<button type="button" onClick="return confirmPayment()" class="btn btn-primary">Confirm Order</button><button type="button" onClick="return hideConfirmPopUp()" class="btn btn-primary">Cancel</button>')}function confirmAddClose(){$("#lodaingModal").find(".modal-footer").html('<button type="button" class="btn btn-primary" id="closeButton" onClick="return closePopup()">Close</button>&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-primary" id="closeFeedbackButton" onClick="closeAndFeedback()">Close and Feedback</button>')}function hideConfirmPopUp(){$("#lodaingModal").modal("hide")}function hidePopUp2(){$("#alertModal").modal("hide")}function initFeedBackVendors(){initLData(),$.ajax({type:"POST",url:contextCommon+"vendorList",data:JSON.stringify(map),success:function(t){var a="";$.each(t,function(t,e){a=a+"<option value="+t+">"+e+"</option>"}),a+="<option value='O'>Others</option>",$("#Product").append(a);var e=window.location.search;if(""!=e){var o=atob(e.substr(1)).split("#");$("#Product").val(o[0]),$("#Name").val(o[1]),$("#phoneNO").val(o[2]),$("#message").focus()}else $("#Product").val("O")},error:function(t){alert("Error Occur please contact Admin")}})}function openCoupanPopUp(){$("#vendorModal").attr("style","display:none;"),$("#coupanModal").modal("show")}function saveCloseCoupanPopUp(){var t=new Array;$("#coupanForm tbody tr").each(function(){rowData=$(this).find("input, select").serializeArray();var a={};$.each(rowData,function(t,e){a[e.name]=e.value}),t.push(a)});var a=!0,e=new Array;$.each(t,function(t,o){"DR"!=$(o).attr("type")&&"DP"!=$(o).attr("type")&&"OR"!=$(o).attr("type")&&"OP"!=$(o).attr("type")||""!=$(o).attr("code")&&""!=$(o).attr("discount")&&""!=$(o).attr("description")&&""!=$(o).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),a=!1),"ND"==$(o).attr("type")&&(""!=$(o).attr("code")&&""!=$(o).attr("description")&&""!=$(o).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),a=!1)),"VR"!=$(o).attr("type")&&"VP"!=$(o).attr("type")||(""!=$(o).attr("code")&&""!=$(o).attr("discount")&&""!=$(o).attr("description")&&""!=$(o).attr("validFrom")&&""!=$(o).attr("validTo")&&""!=$(o).attr("amountGreater")||(alert("Please enter all required details for Row No "+ ++t),a=!1),(checkValidDateFormat($(o).attr("validFrom"))||checkValidDateFormat($(o).attr("validTo")))&&(alert("Please enter valid ValidFrom and ValidTo date, example use format '09/07/2020 07:40 PM' for Row No "+ ++t),a=!1)),e.push($(o).attr("code").toLowerCase())}),checkIfDuplicateExists(e)&&(alert("Duplicate Coupan Code exists. Coupan code must be unique."),a=!1),a&&($("#vendorModal").attr("style","display:block;"),$("#coupanModal").modal("hide"))}function checkValidDateFormat(t){return!(19==t.length&&3==t.split("/").length&&2==t.split(":").length&&3==t.split(" ").length&&(-1!=t.indexOf("AM")||-1!=t.indexOf("PM")))}function addNewCoupan(){var t=$("#coupanRows > tr:last > td:first").html();null==t?t=1:t++;var a='<tr id="coupanRowDetails'+t+'"><td>'+t+"</td><td>"+coupanTypes(t)+'</td><td><input type="hidden" name="id" value="'+t+'" /><input type="text" name="code" size="10"/></td><td><input name="discount" type="number" min="0" max="50" class="component'+t+'"/></td><td>'+coupanStatus(t)+'</td><td><input type="text" name="validFrom" size="14" placeholder="dd/MM/YYYY hh:mm AM/PM" class="component'+t+'"/></td><td><input type="text" placeholder="dd/MM/YYYY hh:mm AM/PM" size="14" name="validTo" class="component'+t+'" /></td><td><input type="text" size="2" maxlength="4" name="amountGreater" /></td><td><input type="text" size="14" name="description" /></td><td><input type="button" value="Remove" onClick="return removeCoupanRow('+t+')" /></td></tr>';return $("#coupanRows").append(a),coupanTypeChange($("#coupanType_"+t),t),t}function coupanTypes(t){return'<select id="coupanType_'+t+'" name="type" onchange="return coupanTypeChange(this,'+t+')" ><option value="DR">Discount Rs</option><option value="DP">Discount %</option><option value="ND">No Delivery Charge</option><option value="OR">One Time Rs</option><option value="OP">One Time %</option><option value="VR">Validity Rs</option><option value="VP">Validity %</option></select>'}function coupanStatus(t){return'<select id="" name="status" class="component'+t+'"><option value="E">Enable</option><option value="D">Disable</option></select>'}function removeCoupanRow(t){$("#coupanRowDetails"+t).remove()}function checkIfDuplicateExists(t){return new Set(t).size!==t.length}function coupanTypeChange(t,a){$(".component"+a).hide(),"OR"!=$(t).val()&&"OP"!=$(t).val()||($(t).parent().parent().find("td").eq(4).find("select").show(),$(t).parent().parent().find("td").eq(3).find(".component"+a).show()),"VR"!=$(t).val()&&"VP"!=$(t).val()||($(t).parent().parent().find("td").eq(5).find(".component"+a).show(),$(t).parent().parent().find("td").eq(6).find(".component"+a).show(),$(t).parent().parent().find("td").eq(3).find(".component"+a).show()),"DP"!=$(t).val()&&"DR"!=$(t).val()||$(t).parent().parent().find("td").eq(3).find(".component"+a).show(),"ND"==$(t).val()&&$(t).parent().parent().find("td").eq(3).find(".component"+a).hide()}